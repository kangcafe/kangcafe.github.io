<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>kangcafe.GitHub.io by KANGCAFE</title>
    <link href="../../../favicon.ico" type="image/x-icon" rel="shortcut icon">
    <link rel="stylesheet" href="../../templates/css/base.css">
    <link rel="stylesheet" href="../../templates/css/mark.css">
    <link rel="stylesheet" href="../../../static/font/iconfont.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta property="wb:webmaster" content="7e72a191affb5721"/>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<header class="header">
    <div class="header-content w-900">
        <h1 class="display-inline">
            <a class="thistitle" href="https://github.com/kangcafe" target="_blank">kang`s cafe<span
                    class="spanFont mr10px iconfont icon-github"></span>
            </a>
        </h1>
        <small>
            <a href="../../index.html">BACK HOME</a>
        </small>
    </div>
</header>

<div class="params div-body w-900" id="readme">
    
    <p>方案一：CSS3 vw 单位</p>
<p>CSS3 中新增了一组相对于可视区域百分比的长度单位 vw, vh, vmin, vmax。其中 vw 是相对于视口宽度百分比的单位，1vw = 1% viewport width， vh 是相对于视口高度百分比的单位，1vh = 1% viewport height；vmin 是相对当前视口宽高中 较小 的一个的百分比单位，同理 vmax 是相对当前视口宽高中 较大 的一个的百分比单位。该单位浏览器兼容性如下：</p>
<p>caniuse.jpg</p>
<p>利用 vw 单位，我们可以很方便做出自适应的正方形：</p>
<p>QQ截图20150806174153.png</p>
<p>实现效果</p>
<p>优点：简洁方便</p>
<p>缺点：浏览器兼容不好</p>
<p>方案二：设置垂直方向的padding撑开容器</p>
<p>在 CSS 盒模型中，一个比较容易被忽略的就是 margin, padding 的百分比数值计算。按照规定，margin, padding 的百分比数值是相对 父元素宽度 的宽度计算的。由此可以发现只需将元素垂直方向的一个 padding 值设定为与 width 相同的百分比就可以制作出自适应正方形了：</p>
<p>1
2
3
4
.placeholder {
  width: 100%;
  padding-bottom: 100%;
}
实现效果</p>
<p>这时一切看起来都很正常，我们试着给容器内增加内容：</p>
<p>padding-overflow.jpg</p>
<p>咦？高度怎么溢出了？我们来看这时的盒模型：</p>
<p>box-module.png</p>
<p>如图中所示，内容区域占据了 38px 的高度。为了解决这个问题，我们可以设置容器的高度为 0：</p>
<p>1
2
3
.placeholder {
  height: 0;
}
这种方案简洁明了，且兼容性好；但是除了填充内容后会出现问题以外，还有可能碰上max-height不收缩：DEMO，于是第三种方案来了：</p>
<p>方案三：利用伪元素的 margin(padding)-top 撑开容器</p>
<p>在方案二中，我们利用百分比数值的 padding-bottom 属性撑开容器内部空间，但是这样做会导致在元素上设置的 max-height 属性失效：</p>
<p>1438854808355052.png</p>
<p>而失效的原因是max-height 属性只限制于 height，也就是只会对元素的 content height 起作用。那么我们是不是能用一个子元素撑开 content 部分的高度，从而使 max-height 属性生效呢？我们来试试：</p>
<p>1
2
3
4
5
6
7
8
.placeholder {
  width: 100%;
}
.placeholder:after {
  content: &#39;&#39;;
  display: block;
  margin-top: 100%; /<em> margin 百分比相对父元素宽度计算 </em>/
}
一刷新页面，啊嘞？怎么什么也没有？</p>
<p>这里就涉及到margin collapse的概念了，由于容器与伪元素在垂直方向发生了外边距折叠，所以我们想象中的撑开父元素高度并没有出现。而应对的方法是在父元素上触发 BFC：</p>
<p>1
2
3
.placeholder {
  overflow: hidden;
}
注：若使用垂直方向上的 padding 撑开父元素，则不需要触发 BFC</p>
<p>实现效果</p>
<p>OK，父元素被撑起来了，我们再试一试设置 max-height：</p>
<p>max-height.jpg</p>
<p>完美！什么？你说元素内部添加内容时高度会溢出？来人，把这个叛徒拖出去喂狗！对于这样的情况，可以将内容放到独立的内容块中，利用绝对定位消除空间占用。</p>
<p><a href="https://idiotwu.me/study/responsive-square/#margin">https://idiotwu.me/study/responsive-square/#margin</a></p>
<h2><span class="header-link" id="references">References</span></h2><section class="footnote-box"><ul></ul></section>


    
</div>
<footer class="footer w-900">
    <a href="#" id="back-to-top" style="display: inline;"><i class="iconfont icon-chevronup"></i></a>
    <a class="forkme" href="https://github.com/kangcafe" target="_blank">Kang`s Cafe on GitHub</a>
    <div class="ds-thread" data-thread-key="56190946-52fc-4a4c-8dd5-e6ce504616ca" data-title="画一些规则图形" data-url="http://kangcafe.com/note/file/css/56190946-52fc-4a4c-8dd5-e6ce504616ca.html"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"kangcafe"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <section class="internationalLicense">
      <a class="imgLicense" rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">
        <img alt="Creative Commons License" style="border-width:0" src="../../img/licensebuttons.png" />
      </a>
        <p class="wordsLicense">This work is licensed under a<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">
          Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License
        </a>. Reprint the 《<a href="画一些规则图形">画一些规则图形</a>》need signature
          '<a href="http://kangcafe.com/">kc</a>', and the url is <a href="http://kangcafe.com/note/file/css/56190946-52fc-4a4c-8dd5-e6ce504616ca.html">http://kangcafe.com/note/file/css/56190946-52fc-4a4c-8dd5-e6ce504616ca.html</a>.</p>
        <p class="stmt">
          <em>这里的大多数文章都写于很多年以前，十年历程，多于怀旧（@2006-2016）。</em>
          <br>Copyright (C) 2016 KangCafe.com, All Rights Reserved <br>Made in China.		<span class="flinks">
            ✎
            <a href="../../../index.html">Home</a> –
            <a href="../../../mood/index.html">Mood</a> –
            <a href="../../../note/index.html">Note</a>.
          </span>
        </p>
    </section>
</footer>
<script type="application/javascript" src="../../../static/js/jquery.min.js"></script>
<script type="text/javascript">
    !function ($) {
        $(window).scroll(function () {
            $(this).scrollTop() > 100 ? $("#back-to-top").fadeIn() : $("#back-to-top").fadeOut()
        }), $("#back-to-top").on("click", function (b) {
            return b.preventDefault(), $("html, body").animate({scrollTop: 0}, 100), !1
        });
    }(jQuery);
</script>
</body>
</html>
