<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>kangcafe.GitHub.io by KANGCAFE</title>
    <link href="../../../favicon.ico" type="image/x-icon" rel="shortcut icon">
    <link rel="stylesheet" href="../../templates/css/base.css">
    <link rel="stylesheet" href="../../templates/css/mark.css">
    <link rel="stylesheet" href="../../../static/font/iconfont.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta property="wb:webmaster" content="7e72a191affb5721"/>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<header class="header">
    <div class="header-content w-900">
        <h1 class="display-inline">
            <a class="thistitle" href="https://github.com/kangcafe" target="_blank">kang`s cafe<span
                    class="spanFont mr10px iconfont icon-github"></span>
            </a>
        </h1>
        <small>
            <a href="../../index.html" target="_blank">BACK HOME</a>
        </small>
    </div>
</header>

<div class="params div-body w-900" id="readme">
    
    <h1><span class="header-link" id="数组">数组</span></h1><h2><span class="header-link" id="数组合并">数组合并</span></h2><h3><span class="header-link" id="第一阶段">第一阶段</span></h3><blockquote>
<p>concat(..)</p>
</blockquote>
<pre><code>var c = a.concat( <span class="hljs-keyword">b </span>)<span class="hljs-comment">;</span>
a = <span class="hljs-keyword">b </span>= null<span class="hljs-comment">; // 回收a、b</span>
</code></pre><p>缺陷：</p>
<ol>
<li>内存</li>
</ol>
<h3><span class="header-link" id="第二阶段">第二阶段</span></h3><blockquote>
<p>push(..) || unshift(..)</p>
</blockquote>
<pre><code><span class="hljs-keyword">for</span> (var <span class="hljs-built_in">i</span>=<span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; b.<span class="hljs-built_in">length</span>; <span class="hljs-built_in">i</span>++) {
    a.push( b[i] );
}
b = null;
</code></pre><p>缺陷：</p>
<ol>
<li>不好维护</li>
</ol>
<h3><span class="header-link" id="第三阶段">第三阶段</span></h3><blockquote>
<p>reduce</p>
</blockquote>
<pre><code>a = <span class="hljs-keyword">b.reduce( </span><span class="hljs-meta">function</span>(coll,<span class="hljs-keyword">item){
</span>    coll.<span class="hljs-keyword">push( </span><span class="hljs-keyword">item </span>)<span class="hljs-comment">;</span>
    return coll<span class="hljs-comment">;</span>
}, a )<span class="hljs-comment">;</span>
</code></pre><h3><span class="header-link" id="第四阶段">第四阶段</span></h3><blockquote>
<p>apply</p>
</blockquote>
<pre><code><span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.push</span><span class="hljs-selector-class">.apply</span>( <span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span> );
</code></pre><h3><span class="header-link" id="第五阶段">第五阶段</span></h3><blockquote>
<p>...</p>
</blockquote>
<pre><code><span class="hljs-selector-tag">a</span>.push( ..<span class="hljs-selector-class">.b</span> )
</code></pre><p>缺陷：</p>
<ol>
<li>可能超出了push(...)或unshift(...)允许调用堆栈的限制</li>
</ol>
<h2><span class="header-link" id="数组类型">数组类型</span></h2><h3><span class="header-link" id="稀疏数组">稀疏数组</span></h3><p>创建一个指定长度的稀疏数组:</p>
<pre><code class="lang-js">var arr = new Array(3);
console.log(arr)
console.log(arr.length)
console.log(arr[0])
=<span class="ruby">=&gt; [ , ,  ]
</span>=<span class="ruby">=&gt; <span class="hljs-number">3</span>
</span>=<span class="ruby">=&gt; undefined</span>
</code></pre>
<p>并且 JavaScript 在遍历稀疏数组时会跳过这些缝隙：</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Array</span>(<span class="hljs-number">3</span>);
arr.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(item, i)</span> </span>{
    console.log(i+<span class="hljs-string">": "</span>+item);
});
==&gt; undefined
arr.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(item, i)</span> </span>{
    <span class="hljs-keyword">return</span> i;
})
==&gt; [ , ,  ]
</code></pre>
<p>还有一些其他情况会生成稀疏数组,比如</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> arr = [];
arr[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
arr[<span class="hljs-number">100</span>] = <span class="hljs-number">100</span>;
arr.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(item, i)</span> </span>{
    console.log(i+<span class="hljs-string">": "</span>+item);
});
==&gt; <span class="hljs-number">0</span>: <span class="hljs-number">0</span>
==&gt; <span class="hljs-number">100</span>: <span class="hljs-number">100</span>
</code></pre>
<p>&gt;</p>
<h3><span class="header-link" id="密集数组">密集数组</span></h3><p>创建一个密集数组:</p>
<pre><code class="lang-js">var arr = Array.apply(<span class="hljs-literal">null</span>, Array(<span class="hljs-number">3</span>));
<span class="hljs-built_in">console</span>.log(arr);
<span class="hljs-built_in">console</span>.log(arr.length);
<span class="hljs-built_in">console</span>.log(arr[<span class="hljs-number">0</span>]);
=<span class="hljs-function">=&gt;</span> [ <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span> ]
=<span class="hljs-function">=&gt;</span> <span class="hljs-number">3</span>
=<span class="hljs-function">=&gt;</span> <span class="hljs-literal">undefined</span>
</code></pre>
<p>从表面上看,貌似这个数组和之前的稀疏数组并没有太多的区别，但是密集数组可以遍历到这些数组元素,还可以为每个元素重新赋值:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> arr = <span class="hljs-built_in">Array</span>.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">Array</span>(<span class="hljs-number">3</span>));
arr.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, i</span>) </span>{
    <span class="hljs-built_in">console</span>.log(i+<span class="hljs-string">": "</span>+item);
});
==&gt; <span class="hljs-number">0</span>: <span class="hljs-literal">undefined</span>
    <span class="hljs-number">1</span>: <span class="hljs-literal">undefined</span>
    <span class="hljs-number">2</span>: <span class="hljs-literal">undefined</span>
arr.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, i</span>) </span>{
    <span class="hljs-keyword">return</span> i;
})
==&gt; [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span> ]
</code></pre>
<h4><span class="header-link" id="另一种写法">另一种写法</span></h4><pre><code class="lang-js"><span class="hljs-keyword">Array</span>.apply(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">Array</span>(<span class="hljs-number">3</span>)).map(<span class="hljs-function"><span class="hljs-keyword">Function</span>.<span class="hljs-title">prototype</span>.<span class="hljs-title">call</span>.<span class="hljs-title">bind</span><span class="hljs-params">(Number)</span>)</span>;
==&gt; [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span> ]
</code></pre>
<p>等同于下面的写法</p>
<pre><code class="lang-js"><span class="hljs-built_in">Array</span>.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">Array</span>(<span class="hljs-number">3</span>)).map(<span class="hljs-built_in">Function</span>.prototype.call,<span class="hljs-built_in">Number</span>)
</code></pre>
<h4><span class="header-link" id="效率">效率</span></h4><p>使用自定义的函数更清晰,但自定义的函数肯定没有原生方法快</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> arr = [<span class="hljs-string">"aaa  "</span>, <span class="hljs-string">"  bbb"</span>, <span class="hljs-string">"  ccc  "</span>];
arr.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> </span>{
    <span class="hljs-keyword">return</span> item.trim();
});
==&gt; [<span class="hljs-string">"aaa"</span>, <span class="hljs-string">"bbb"</span>, <span class="hljs-string">"ccc"</span>]
arr.map(<span class="hljs-function"><span class="hljs-keyword">Function</span>.<span class="hljs-title">prototype</span>.<span class="hljs-title">call</span>, <span class="hljs-title">String</span>.<span class="hljs-title">prototype</span>.<span class="hljs-title">trim</span>)</span>;
==&gt; [<span class="hljs-string">"aaa"</span>, <span class="hljs-string">"bbb"</span>, <span class="hljs-string">"ccc"</span>]
</code></pre>

    
</div>
<footer class="footer w-900">
    <a href="#" id="back-to-top" style="display: inline;"><i class="iconfont icon-chevronup"></i></a>
    <div class="ds-thread" data-thread-key="U2h1X1p1" data-title="数组" data-url="http://kangcafe.com/note/file/js/Shu_Zu.html"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"kangcafe"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
</footer>
<script type="application/javascript" src="../../../static/js/jquery.min.js"></script>
<script type="text/javascript">
    !function ($) {
        $(window).scroll(function () {
            $(this).scrollTop() > 100 ? $("#back-to-top").fadeIn() : $("#back-to-top").fadeOut()
        }), $("#back-to-top").on("click", function (b) {
            return b.preventDefault(), $("html, body").animate({scrollTop: 0}, 100), !1
        });
    }(jQuery);
</script>
</body>
</html>