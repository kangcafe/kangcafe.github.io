#日期

##日期对象

- newDate(year,month,day...)

生成指定日期和时间的日期对象。表示月份的参数介于0到11之间。

###日期的取得与设定

- date.getFullYear()
- date.setFullYear(year)
- date.getYear()
- date.setYear(year)
- date.getMonth()
- date.setMonth(mon)
- date.getDate()
- date.setDate(date)
- date.getDay()
- date.getHours()
- date.setHours(hour)
- date.getMinutes()
- date.setMinutes(min)
- date.getSeconds()
- date.setSeconds(sec)
- date.getMilliseconds()
- date.setMilliseconds(msec)

取得与设定年、月、日、星期几、时、分、秒、毫秒。星期几的值为0（星期天）～6（星期六），月份的值为0～11(1月为0)。

getFullYear()和setFullYear()总是取得或设定像2000这样四位数的年份。

getYear()返回的值不总是四位的数字。对于介于1900与1999之间的年份，getYear()方法仅返回两位数字。对于1900之前或1999之后的年份，则返回四位数字。使用setYear()时，如果year参数是两位的数字，比如setYear(91)，则该方法会理解为1991。如果要规定1990年之前或1999年之后的年份，请使用四位数字。注意，从ECMAScriptv3起，JavaScript实现不再要求使用这两个函数，请使用getFullYear()和setFullYear()代替它们。

- date.getUTCFullYear()
- date.setUTCFullYear(year)
- date.getUTCYear()
- date.setUTCYear(year)
- date.getUTCMonth()
- date.setUTCMonth(month)
- date.getUTCDate()
- date.setUTCDate(date)
- date.getUTCDay()
- date.getUTCHours()
- date.setUTCHours(hour)
- date.getUTCMinutes()
- date.setUTCMinutes(min)
- date.getUTCSeconds()
- date.setUTCSeconds(sec)
- date.getUTCMilliseconds()
- date.setUTCMilliseconds(msec)

取得与设定协调世界时（UTC，又称世界统一时间，世界标准时间，国际协调时间）的年、月、日、星期几、时、分、秒、毫秒。

- date.getTimezoneOffset()

取得时区信息，以分钟为单位。中国的东八区为-480(-8小时)。

###转换为字符串

- date.toString()
- date.toLocaleString()
- date.toGMTString()
- date.toUTCString()
- date.toVarDate()

把日期转换为字符串。toString()、toLocaleString()、toVarDate()转换为当地时间，toGMTString()和toUTCString()转换为设定协调世界时（UTC）。

dd=newDate();
document.write(dd.toLocaleString());

###转换为数值

- date.getTime()
- date.setTime(time)

取得与设定距1970年1月1日0时0分0秒（UTC）之间的毫秒数。下面的例子取得一个星期后的日期。

```js
dd=newDate();
dd.setTime(dd.getTime()+(7243600*1000));
```

- date.UTC(year,mon,day,hour,min,sec)

返回1970年1月1日0时0分0秒（UTC）到指定日期的毫秒数。JavaScript1.3开始，可以指定毫秒。

- date.parse(string)

解析一个日期时间字符串string，并返回1970年1月1日0时0分0秒（UTC）到指定日期的毫秒数。string的形式与dd=newDate(string)的时候相同。

##format

###方案一

```js
/**
*对Date的扩展，将Date转化为指定格式的String
*月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q)可以用1-2个占位符
*年(y)可以用1-4个占位符，毫秒(S)只能用1个占位符(是1-3位的数字)
*eg:
*(newDate()).Format("yyyy-MM- ddhh:mm:ss.S")==>2006-07-0208:09:04.423
*(newDate()).Format("yyyy-M- dh:m:s.S")==>2006-7-28:9:4.18
*/
Date.prototype.Format=function(fmt){
	var o={
		"M+":this.getMonth()+1,//月份
		"d+":this.getDate(),//日
		"h+":this.getHours(),//小时
		"m+":this.getMinutes(),//分
		"s+":this.getSeconds(),//秒
		"q+":Math.floor((this.getMonth()+3)/3),//季度
		"S":this.getMilliseconds()//毫秒
	};
	if(/(y+)/.test(fmt))
		fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));
	for(varkino)
		if(newRegExp("("+k+")").test(fmt))
	fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));
	return fmt;
}
```

###方案二

```js
/**
*对Date的扩展，将Date转化为指定格式的String
*月(M)、日(d)、12小时(h)、24小时(H)、分(m)、秒(s)、周(E)、季度(q)可以用1-2个占位符
*年(y)可以用1-4个占位符，毫秒(S)只能用1个占位符(是1-3位的数字)
*eg:
*(newDate()).pattern("yyyy-MM- ddhh:mm:ss.S")==>2006-07-0208:09:04.423
*(newDate()).pattern("yyyy-MM- ddEHH:mm:ss")==>2009-03-10二20:09:04
*(newDate()).pattern("yyyy-MM- ddEEhh:mm:ss")==>2009-03-10周二08:09:04
*(newDate()).pattern("yyyy-MM- ddEEEhh:mm:ss")==>2009-03-10星期二08:09:04
*(newDate()).pattern("yyyy-M- dh:m:s.S")==>2006-7-28:9:4.18
*/
Date.prototype.pattern=function(fmt){
	var o={
		"M+":this.getMonth()+1,//月份
		"d+":this.getDate(),//日
		"h+":this.getHours()%12==0?12:this.getHours()%12,//小时
		"H+":this.getHours(),//小时
		"m+":this.getMinutes(),//分
		"s+":this.getSeconds(),//秒
		"q+":Math.floor((this.getMonth()+3)/3),//季度
		"S":this.getMilliseconds()//毫秒
	};
	varweek={
		"0":"/u65e5",
		"1":"/u4e00",
		"2":"/u4e8c",
		"3":"/u4e09",
		"4":"/u56db",
		"5":"/u4e94",
		"6":"/u516d"
	};
	if(/(y+)/.test(fmt)){
		fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));
	}
	if(/(E+)/.test(fmt)){
		fmt=fmt.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"/u661f/u671f":"/u5468"):"")+week[this.getDay()+""]);
	}
	for(varkino){
		if(newRegExp("("+k+")").test(fmt)){
			fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));
		}
	}
	return fmt;
}
```

###方案三

```js
Date.prototype.format=function(mask){
	var d=this;
	var zeroize = function(value,length){
		if(!length) length=2;
		value = String(value);
		for(var i=0,zeros='';i<(length-value.length);i++){
			zeros+='0';
		}
		return zeros+value;
	};
	return mask.replace(/"[^"]*"|'[^']*'|/b(?:d{1,4}|m{1,4}|yy(?:yy)?|([hHMstT])/1?|[lLZ])/b/g,function($0){
		switch($0){
			case 'd':return d.getDate();
			case 'dd':return zeroize(d.getDate());
			case 'ddd':return ['Sun','Mon','Tue','Wed','Thr','Fri','Sat'][d.getDay()];
			case 'dddd':return ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'][d.getDay()];
			case 'M':return d.getMonth()+1;
			case 'MM':return zeroize(d.getMonth()+1);
			case 'MMM':return ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][d.getMonth()];
			case 'MMMM':return ['January','February','March','April','May','June','July','August','September','October','November','December'][d.getMonth()];
			case 'yy':return String(d.getFullYear()).substr(2);
			case 'yyyy':return d.getFullYear();
			case 'h':return d.getHours()%12||12;
			case 'hh':return zeroize(d.getHours()%12||12);
			case 'H':return d.getHours();
			case 'HH':return zeroize(d.getHours());
			case 'm':return d.getMinutes();
			case 'mm':return zeroize(d.getMinutes());
			case 's':return d.getSeconds();
			case 'ss':return zeroize(d.getSeconds());
			case 'l':return zeroize(d.getMilliseconds(),3);
			case 'L':var m=d.getMilliseconds();
				if(m>99) m=Math.round(m/10);
				return zeroize(m);
			case 'tt':return d.getHours()<12?'am':'pm';
			case 'TT':return d.getHours()<12?'AM':'PM';
			case 'Z':return d.toUTCString().match(/[A-Z]+$/);
			default:return $0.substr(1,$0.length-2);
		}
	});
};
```